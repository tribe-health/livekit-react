(this["webpackJsonplivekit-react-example"]=this["webpackJsonplivekit-react-example"]||[]).push([[0],{140:function(e,t,a){"use strict";a.r(t);a(83);var n=a(0),r=a.n(n),c=a(54),i=a.n(c),o=(a(88),a(40)),l=a(5),u=a(7),s=a.n(u),d=a(41),m=a(16),v=a(42),p=a(1),f=a(19),b=a(31),h=a(76),E=a(78),k=a(77),g=function(e){var t=e.track,a=e.isLocal,r=Object(n.useRef)();return Object(n.useEffect)((function(){if(!a)return r.current=t.attach(),t.sid&&r.current.setAttribute("data-audio-track-id",t.sid),function(){return t.detach().forEach((function(e){return e.remove()}))}}),[t,a]),null},S={video:"_2WNzJ",participant:"_34YL4",placeholder:"_30KSQ",participantBar:"_2LCHl",screenShare:"_1FIqv",iconRed:"_3LzZj",controlsWrapper:"_2kKks",buttonWrapper:"_3w3nM",button:"_hRq5k",icon:"_1Nxni",dangerButton:"_Rt0RH",dropdown:"_3Lz0y",hasDropdown:"_3Bgvz",separator:"_1VLMM",popoverMenu:"_3XXS4",list:"_dKNN7",container:"_14898",overlay:"_17KXW",unmuteButton:"_3QhLc"},T=function(e){var t=e.label,a=e.disabled,c=e.onClick,i=e.icon,o=e.className,l=e.menuItems,u=e.popoverContainerClassName,s=e.popoverTriggerBtnClassName,d=e.popoverTriggerBtnSeparatorClassName,m=e.onMenuItemClick,v=Object(n.useState)(!1),p=v[0],E=v[1],k=S.button;o&&(k+=" "+o);var g,T=r.a.createElement("div",null);return l&&l.length>0&&(k+=" "+S.hasDropdown,g=r.a.createElement("button",{disabled:a,className:S.button+" "+s+"  "+S.dropdown,onClick:function(){return E(!p)}},r.a.createElement("div",{className:S.separator+" "+d}),r.a.createElement(b.a,{height:32,icon:f.a})),T=r.a.createElement("div",{className:S.popoverMenu+" "+u},r.a.createElement("ul",{className:S.list},null===l||void 0===l?void 0:l.map((function(e,t){return r.a.createElement("li",{key:t,onClick:function(){return function(e){E(!1),m&&m(e)}(e)}},e.label)}))))),r.a.createElement(h.Popover,{isOpen:p,positions:["top"],content:T},r.a.createElement("div",{className:S.buttonWrapper},r.a.createElement("button",{disabled:a,className:k,onClick:function(){E(!1),c&&c()}},i&&r.a.createElement(b.a,{className:S.icon,height:32,icon:i}),t),g))},j=function(e){var t=e.isMuted,a=e.onClick,c=e.onSourceSelected,i=e.muteText,o=void 0===i?"Mute":i,l=e.unmuteText,u=void 0===l?"Unmute":l,s=e.className,d=e.popoverContainerClassName,m=e.popoverTriggerBtnClassName,v=e.popoverTriggerBtnSeparatorClassName,b=Object(n.useState)([]),h=b[0],E=b[1],k=Object(n.useState)([]),g=k[0],S=k[1],j=Object(n.useCallback)((function(){try{return Promise.resolve(p.Room.getLocalDevices("audioinput")).then((function(e){E(e),S(e.map((function(e){return{label:e.label}})))}))}catch(e){return Promise.reject(e)}}),[]);Object(n.useEffect)((function(){return j(),navigator.mediaDevices.addEventListener("devicechange",j),function(){navigator.mediaDevices.removeEventListener("devicechange",j)}}),[]);return r.a.createElement(T,{label:t?u:o,icon:t?f.d:f.c,onClick:a,menuItems:g,onMenuItemClick:function(e){var t=h.find((function(t){return t.label===e.label}));t&&c&&c(t)},className:s,popoverContainerClassName:d,popoverTriggerBtnClassName:m,popoverTriggerBtnSeparatorClassName:v})};function O(e){var t,a=Object(n.useState)(!1),r=a[0],c=a[1],i=Object(n.useState)(!1)[1],o=Object(n.useState)(!1),l=o[0],u=o[1],s=Object(n.useState)(),d=s[0],m=s[1],v=Object(n.useState)([]),f=v[0],b=v[1],h=Object(n.useState)([]),E=h[0],k=h[1],g=function(){b(Array.from(e.tracks.values())),k(Array.from(e.tracks.values()).filter((function(e){return e.isSubscribed&&void 0!==e.track})))};return Object(n.useEffect)((function(){var t=function(e){e.kind===p.Track.Kind.Audio?c(!0):e.kind===p.Track.Kind.Video&&i(!0)},a=function(e){e.kind===p.Track.Kind.Audio?c(!1):e.kind===p.Track.Kind.Video&&i(!1)},n=function(){e.metadata&&m(e.metadata)},r=function(){u(e.isSpeaking)};return e.on(p.ParticipantEvent.TrackMuted,t),e.on(p.ParticipantEvent.TrackUnmuted,a),e.on(p.ParticipantEvent.MetadataChanged,n),e.on(p.ParticipantEvent.IsSpeakingChanged,r),e.on(p.ParticipantEvent.TrackPublished,g),e.on(p.ParticipantEvent.TrackUnpublished,g),e.on(p.ParticipantEvent.TrackSubscribed,g),e.on(p.ParticipantEvent.TrackUnsubscribed,g),e.on(p.ParticipantEvent.LocalTrackPublished,g),e.on("localtrackchanged",g),n(),r(),g(),function(){e.off(p.ParticipantEvent.TrackMuted,t),e.off(p.ParticipantEvent.TrackUnmuted,a),e.off(p.ParticipantEvent.MetadataChanged,n),e.off(p.ParticipantEvent.IsSpeakingChanged,r),e.off(p.ParticipantEvent.TrackPublished,g),e.off(p.ParticipantEvent.TrackUnpublished,g),e.off(p.ParticipantEvent.TrackSubscribed,g),e.off(p.ParticipantEvent.TrackUnsubscribed,g),e.off(p.ParticipantEvent.LocalTrackPublished,g),e.off("localtrackchanged",g)}}),[e]),e.audioTracks.forEach((function(e){t=e.isMuted})),void 0===t&&(t=!0),r!==t&&c(t),{isLocal:e instanceof p.LocalParticipant,isSpeaking:l,publications:f,subscribedTracks:E,cameraPublication:e.getTrack(p.Track.Source.Camera),microphonePublication:e.getTrack(p.Track.Source.Microphone),screenSharePublication:e.getTrack(p.Track.Source.ScreenShare),metadata:d,unpublishTrack:function(t){try{if(!(e instanceof p.LocalParticipant))throw new Error("could not unpublish, not a local participant");return e.unpublishTrack(t),e.emit("localtrackchanged"),Promise.resolve()}catch(a){return Promise.reject(a)}}}}var C=function(e){var t=e.isEnabled,a=e.onClick,c=e.onSourceSelected,i=e.disableText,o=void 0===i?"Disable Video":i,l=e.enableText,u=void 0===l?"Enable Video":l,s=e.className,d=e.popoverContainerClassName,m=e.popoverTriggerBtnClassName,v=e.popoverTriggerBtnSeparatorClassName,b=Object(n.useState)([]),h=b[0],E=b[1],k=Object(n.useState)([]),g=k[0],S=k[1],j=Object(n.useCallback)((function(){try{return Promise.resolve(p.Room.getLocalDevices("videoinput")).then((function(e){E(e),S(e.map((function(e){return{label:e.label}})))}))}catch(e){return Promise.reject(e)}}),[]);Object(n.useEffect)((function(){return j(),navigator.mediaDevices.addEventListener("devicechange",j),function(){navigator.mediaDevices.removeEventListener("devicechange",j)}}),[]);return r.a.createElement(T,{label:t?o:u,icon:t?f.f:f.g,onClick:a,menuItems:g,onMenuItemClick:function(e){var t=h.find((function(t){return t.label===e.label}));t&&c&&c(t)},className:s,popoverContainerClassName:d,popoverTriggerBtnClassName:m,popoverTriggerBtnSeparatorClassName:v})},P=function(e){var t,a,n,c=e.room,i=e.enableScreenShare,o=e.enableAudio,l=e.enableVideo,u=e.onLeave,s=O(c.localParticipant).unpublishTrack;if(void 0===i&&(i=!0),void 0===l&&(l=!0),void 0===o&&(o=!0),o){var d=c.localParticipant.isMicrophoneEnabled;t=r.a.createElement(j,{isMuted:!d,onClick:function(){return c.localParticipant.setMicrophoneEnabled(!d)},onSourceSelected:function(e){return c.switchActiveDevice("audioinput",e.deviceId)}})}if(l){var m=c.localParticipant.isCameraEnabled;a=r.a.createElement(C,{isEnabled:m,onClick:function(){return c.localParticipant.setCameraEnabled(!m)},onSourceSelected:function(e){c.switchActiveDevice("videoinput",e.deviceId)}})}if(i){var v=c.localParticipant.isScreenShareEnabled;n=r.a.createElement(T,{label:v?"Stop sharing":"Share screen",icon:v?f.e:f.b,onClick:function(){if(v){var e=c.localParticipant.getTrack(p.Track.Source.ScreenShare);null!==e&&void 0!==e&&e.track&&s(e.track)}else c.localParticipant.setScreenShareEnabled(!0)}})}return r.a.createElement("div",{className:S.controlsWrapper},t,a,n,u&&r.a.createElement(T,{label:"End",className:S.dangerButton,onClick:function(){c.disconnect(),u(c)}}))},N=function(e){var t,a=e.track,c=e.isLocal,i=e.objectFit,o=e.className,l=e.width,u=e.height,s=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=s.current;if(e)return e.muted=!0,a.attach(e),function(){a.detach(e)}}),[a,s]);var d="environment"!==(null===(t=a.mediaStreamTrack)||void 0===t?void 0:t.getSettings().facingMode),m={transform:c&&d?"rotateY(180deg)":"",width:l,height:u};return i&&(m.objectFit=i),r.a.createElement("video",{ref:s,className:null!=o?o:S.video,style:m})},y=function(e){var t,a,n=e.participant,c=e.width,i=e.height,o=e.className,l=e.aspectWidth,u=e.aspectHeight,s=e.orientation,d=e.displayName,m=e.showOverlay,v=e.onMouseEnter,p=e.onMouseLeave,h=e.onClick,k=O(n),g=k.cameraPublication,T=k.isLocal,j={width:c,height:i},C="contain";!s&&l&&u&&(s=l>u?"landscape":"portrait"),null!==g&&void 0!==g&&g.dimensions&&(t=g.dimensions.width>g.dimensions.height?"landscape":"portrait"),t===s&&(C="cover"),d||(d=n.identity,T&&(d+=" (You)")),a=null===g||void 0===g||!g.isSubscribed||null===g||void 0===g||!g.track||null!==g&&void 0!==g&&g.isMuted?r.a.createElement("div",{className:S.placeholder}):r.a.createElement(N,{track:g.track,isLocal:T,objectFit:C,width:"100%",height:"100%"});var P=[S.participant];o&&P.push(o);var y=!n.isMicrophoneEnabled;return r.a.createElement("div",{className:P.join(" "),style:j,onMouseEnter:v,onMouseLeave:p,onClick:h},l&&u&&r.a.createElement(E.AspectRatio,{ratio:l/u},a),(!l||!u)&&a,m&&r.a.createElement("div",{className:S.participantBar},r.a.createElement("div",null,d),r.a.createElement("div",null,r.a.createElement(b.a,{icon:y?f.d:f.c,height:24,className:y?S.iconRed:S.iconNormal}))))},L=function(e){var t=e.track,a=e.width,n=e.height;return r.a.createElement("div",{className:S.screenShare},r.a.createElement(N,{track:t,isLocal:!1,width:a,height:n}))},w="_2sm4e",R="_2VE66",M="_2kKDi",I="_gA0MQ",_="_1smc2",x=function(e){var t=e.roomState,a=e.participantRenderer,c=e.controlRenderer,i=e.onLeave,o=t.isConnecting,l=t.error,u=t.participants,s=t.room,d=Object(n.useState)(!1),m=d[0],v=d[1];if(l)return r.a.createElement("div",null,"error ",l.message);if(o)return r.a.createElement("div",null,"connecting");if(!s)return r.a.createElement("div",null,"room closed");if(0===u.length)return r.a.createElement("div",null,"no one is in the room");var f,b=null!=a?a:y,h=null!=c?c:P;u.forEach((function(e){if(!f){var t=e.getTrack(p.Track.Source.ScreenShare);null!==t&&void 0!==t&&t.isSubscribed&&t.videoTrack&&(f=t.videoTrack)}}));var E,k=u;return E=f?r.a.createElement(L,{track:f,height:"100%",width:"100%"}):r.a.createElement(b,{key:u[0].identity,participant:u[0],width:"100%",height:"100%",orientation:"landscape",showOverlay:m,onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)}}),r.a.createElement("div",{className:w},r.a.createElement("div",{className:R},r.a.createElement("div",{className:M},E),r.a.createElement("div",{className:I},k.map((function(e){return r.a.createElement(b,{key:e.identity,participant:e,width:"100%",aspectWidth:16,aspectHeight:9,showOverlay:m,onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)}})})))),r.a.createElement("div",{className:_},r.a.createElement(h,{room:s,onLeave:i})))},A="_2zM8F",D="_9PXrI",B="_Tl5ht",K="_jGXiG",U="_3MB5b",V=function(e){var t=e.roomState,a=e.participantRenderer,c=e.controlRenderer,i=e.onLeave,o=t.isConnecting,l=t.error,u=t.participants,s=t.room,d=Object(n.useState)(!1),m=d[0],v=d[1];if(l)return r.a.createElement("div",null,"error ",l.message);if(o)return r.a.createElement("div",null,"connecting");if(!s)return r.a.createElement("div",null,"room closed");if(0===u.length)return r.a.createElement("div",null,"no one is in the room");var f,b=null!=a?a:y,h=null!=c?c:P;u.forEach((function(e){if(!f){var t=e.getTrack(p.Track.Source.ScreenShare);null!==t&&void 0!==t&&t.isSubscribed&&t.videoTrack&&(f=t.videoTrack)}}));var E,k=u;return E=f?r.a.createElement(L,{track:f,height:"100%",width:"100%"}):r.a.createElement(b,{key:u[0].identity,participant:u[0],showOverlay:m,width:"100%",height:"100%",orientation:"portrait",onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)}}),r.a.createElement("div",{className:A},r.a.createElement("div",{className:D},E),r.a.createElement("div",{className:B},k.map((function(e){return r.a.createElement(b,{key:e.identity,participant:e,className:K,aspectWidth:4,aspectHeight:3,showOverlay:m,onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)}})}))),r.a.createElement("div",{className:U},r.a.createElement(h,{room:s,enableScreenShare:!1,onLeave:i})))},W=function(e){var t,a=Object(k.useMediaQuery)({query:"(max-width: 800px)"}),n=e.roomState.room;return t=a?r.a.createElement(V,Object.assign({},e)):r.a.createElement(x,Object.assign({},e)),r.a.createElement("div",{className:S.container},t,e.roomState.audioTracks.map((function(e){return r.a.createElement(g,{key:e.sid,track:e,isLocal:!1})})),!1===(null===n||void 0===n?void 0:n.canPlaybackAudio)&&r.a.createElement("div",{className:S.overlay},r.a.createElement("button",{className:S.unmuteButton,onClick:function(){n.startAudio()}},r.a.createElement(b.a,{className:S.icon,size:"1x",icon:f.h}),"Click to Unmute")))};"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function z(e,t){if(e.sort((function(e,t){var a,n,r,c;if(e.isSpeaking&&t.isSpeaking)return t.audioLevel-e.audioLevel;if(e.isSpeaking!==t.isSpeaking)return e.isSpeaking?-1:1;if(e.lastSpokeAt!==t.lastSpokeAt){var i,o,l,u,s=null!=(i=null===(o=e.lastSpokeAt)||void 0===o?void 0:o.getTime())?i:0;return(null!=(l=null===(u=t.lastSpokeAt)||void 0===u?void 0:u.getTime())?l:0)-s}var d=e.videoTracks.size>0;return d!==t.videoTracks.size>0?d?-1:1:(null!=(a=null===(n=e.joinedAt)||void 0===n?void 0:n.getTime())?a:0)-(null!=(r=null===(c=t.joinedAt)||void 0===c?void 0:c.getTime())?r:0)})),t){var a=e.indexOf(t);a>=0&&(e.splice(a,1),e.length>0?e.splice(1,0,t):e.push(t))}}var F=function(e){var t=e.url,a=e.token,r=e.connectOptions,c=e.sortParticipants,i=e.stageRenderer,o=e.participantRenderer,l=e.controlRenderer,u=e.onConnected,s=e.onLeave,d=e.adaptiveVideo,m=function(e){var t,a=Object(n.useState)(),r=a[0],c=a[1],i=Object(n.useState)(!1),o=i[0],l=i[1],u=Object(n.useState)(),s=u[0],d=u[1],m=Object(n.useState)([]),v=m[0],f=m[1],b=Object(n.useState)([]),h=b[0],E=b[1],k=null!=(t=null===e||void 0===e?void 0:e.sortParticipants)?t:z;return{connect:Object(n.useCallback)((function(e,t,a){try{return l(!0),Promise.resolve(function(e,t){try{var a=e()}catch(n){return t(n)}return a&&a.then?a.then(void 0,t):a}((function(){return Promise.resolve(Object(p.connect)(e,t,a)).then((function(e){c(e);var t=function(){var t=Array.from(e.participants.values()),a=[e.localParticipant];a.push.apply(a,t),k(a,e.localParticipant),f(a)},a=function(a){if(t(),!a||a.kind===p.Track.Kind.Audio){var n=[];e.participants.forEach((function(e){e.audioTracks.forEach((function(e){e.track&&e.kind===p.Track.Kind.Audio&&n.push(e.track)}))})),E(n)}};return e.once(p.RoomEvent.Disconnected,(function(){setTimeout((function(){return c(void 0)})),e.off(p.RoomEvent.ParticipantConnected,t).off(p.RoomEvent.ParticipantDisconnected,t).off(p.RoomEvent.ActiveSpeakersChanged,t).off(p.RoomEvent.TrackSubscribed,a).off(p.RoomEvent.TrackUnsubscribed,a).off(p.RoomEvent.LocalTrackPublished,a).off(p.RoomEvent.AudioPlaybackStatusChanged,t),e.localParticipant.off("localtrackchanged",a)})),e.on(p.RoomEvent.ParticipantConnected,t).on(p.RoomEvent.ParticipantDisconnected,t).on(p.RoomEvent.ActiveSpeakersChanged,t).on(p.RoomEvent.TrackSubscribed,a).on(p.RoomEvent.TrackUnsubscribed,a).on(p.RoomEvent.LocalTrackPublished,a).on(p.RoomEvent.AudioPlaybackStatusChanged,t),e.localParticipant.on("localtrackchanged",a),l(!1),a(),e}))}),(function(e){l(!1),e instanceof Error?d(e):d(new Error("an error has occured"))})))}catch(n){return Promise.reject(n)}}),[]),isConnecting:o,room:r,error:s,participants:v,audioTracks:h}}({sortParticipants:c});return r||(r={}),d&&(r.autoManageVideo=!0),Object(n.useEffect)((function(){m.connect(t,a,r).then((function(e){if(e)return u&&u(e),function(){e.disconnect()}}))}),[]),(null!=i?i:W)({roomState:m,participantRenderer:o,controlRenderer:l,onLeave:s})},H=a(80),X=function(){var e=Object(n.useState)("ws://localhost:7880"),t=Object(m.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),o=Object(m.a)(i,2),u=o[0],f=o[1],b=Object(n.useState)(!0),h=Object(m.a)(b,2),E=h[0],k=h[1],g=Object(n.useState)(!1),S=Object(m.a)(g,2),O=S[0],P=S[1],y=Object(n.useState)(!0),L=Object(m.a)(y,2),w=L[0],R=L[1],M=Object(n.useState)(!0),I=Object(m.a)(M,2),_=I[0],x=I[1],A=Object(n.useRef)(null),D=Object(n.useState)(),B=Object(m.a)(D,2),K=B[0],U=B[1],V=Object(n.useState)(),W=Object(m.a)(V,2),z=W[0],F=W[1],X=Object(n.useState)(),q=Object(m.a)(X,2),J=q[0],Q=q[1],G=Object(l.f)();Object(n.useEffect)((function(){if(A.current&&K){var e=A.current;return K.attach(e),function(){K.detach(e),K.stop()}}}),[K,A]),Object(n.useEffect)((function(){x(!u||!a)}),[u,a]);var Y=function(){var e=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!K){e.next=6;break}K.stop(),P(!1),U(void 0),e.next=11;break;case 6:return e.next=8,Object(p.createLocalVideoTrack)({deviceId:null===J||void 0===J?void 0:J.deviceId});case 8:t=e.sent,P(!0),U(t);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){Object(p.createLocalVideoTrack)({deviceId:null===J||void 0===J?void 0:J.deviceId}).then((function(e){P(!0),U(e)}))}),[J]);var Z;return Z=K?r.a.createElement(N,{track:K,isLocal:!0}):r.a.createElement("div",{className:"placeholder"}),r.a.createElement("div",{className:"prejoin"},r.a.createElement("main",null,r.a.createElement("h2",null,"LiveKit Video"),r.a.createElement("hr",null),r.a.createElement("div",{className:"entrySection"},r.a.createElement("div",null,r.a.createElement("div",{className:"label"},"LiveKit URL"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"url",value:a,onChange:function(e){return c(e.target.value)}}))),r.a.createElement("div",null,r.a.createElement("div",{className:"label"},"Token"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"token",value:u,onChange:function(e){return f(e.target.value)}}))),r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",name:"simulcast",checked:E,onChange:function(e){return k(e.target.checked)}}),r.a.createElement("label",null,"Simulcast"))),r.a.createElement("div",{className:"videoSection"},r.a.createElement(H.AspectRatio,{ratio:16/9},Z)),r.a.createElement("div",{className:"controlSection"},r.a.createElement("div",null,r.a.createElement(j,{isMuted:!w,onClick:function(){R(!w)},onSourceSelected:F}),r.a.createElement(C,{isEnabled:void 0!==K,onClick:Y,onSourceSelected:function(e){if(Q(e),K){if(K.mediaStreamTrack.getSettings().deviceId===e.deviceId)return;K.stop()}}})),r.a.createElement("div",{className:"right"},r.a.createElement(T,{label:"Connect",disabled:_,icon:v.a,onClick:function(){if(K&&K.stop(),"https:"!==window.location.protocol||!a.startsWith("ws://")||a.startsWith("ws://localhost")){var e={url:a,token:u,videoEnabled:O?"1":"0",audioEnabled:w?"1":"0",simulcast:E?"1":"0"};z&&(e.audioDeviceId=z.deviceId),J&&(e.videoDeviceId=J.deviceId),G.push({pathname:"/room",search:"?"+new URLSearchParams(e).toString()})}else alert("Unable to connect to insecure websocket from https")}})))),r.a.createElement("footer",null,"This page is built with ",r.a.createElement("a",{href:"https://github.com/livekit/livekit-react"},"LiveKit React"),"\xa0 (",r.a.createElement("a",{href:"https://github.com/livekit/livekit-react/blob/master/example/src/PreJoinPage.tsx"},"source"),")"))},q=a(81),J=(a(138),function(){var e=Object(n.useState)(0),t=Object(m.a)(e,2),a=t[0],c=t[1],i=Object(l.f)(),o=new URLSearchParams(Object(l.g)().search),u=o.get("url"),s=o.get("token"),d=o.get("recorder");if(!u||!s)return r.a.createElement("div",null,"url and token are required");var f=function(e){c(e.participants.size+1)};return r.a.createElement("div",{className:"roomContainer"},r.a.createElement("div",{className:"topBar"},r.a.createElement("h2",null,"LiveKit Video"),r.a.createElement("div",{className:"participantCount"},r.a.createElement(q.a,{icon:v.b}),r.a.createElement("span",null,a))),r.a.createElement(F,{url:u,token:s,onConnected:function(e){!function(e,t){Q.apply(this,arguments)}(e,o),e.on(p.RoomEvent.ParticipantConnected,(function(){return f(e)})),e.on(p.RoomEvent.ParticipantDisconnected,(function(){return function(e){f(e),d&&1===parseInt(d,10)&&0===e.participants.size&&console.log("END_RECORDING")}(e)})),f(e)},connectOptions:{autoManageVideo:!0,logLevel:p.LogLevel.debug},onLeave:function(){i.push({pathname:"/"})}}))});function Q(){return(Q=Object(d.a)(s.a.mark((function e(t,a){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.currentRoom=t,n={},G(a,"simulcast")&&(t.defaultPublishOptions.simulcast=!0),!G(a,"audioEnabled")){e.next=9;break}return n.audio=!0,(r=a.get("audioDeviceId"))&&(t.defaultCaptureOptions.audioDeviceId=r),e.next=9,t.localParticipant.setMicrophoneEnabled(!0);case 9:if(!G(a,"videoEnabled")){e.next=15;break}return n.video=!0,(c=a.get("videoDeviceId"))&&(t.defaultCaptureOptions.videoDeviceId=c),e.next=15,t.localParticipant.setCameraEnabled(!0);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t){return"1"===e.get(t)||"true"===e.get(t)}var Y=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(o.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/room"},r.a.createElement(J,null)),r.a.createElement(l.a,{path:"/"},r.a.createElement(X,null)))))};i.a.render(r.a.createElement(Y,null),document.getElementById("root"))},82:function(e,t,a){e.exports=a(140)},83:function(e,t,a){},88:function(e,t,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.e9230216.chunk.js.map